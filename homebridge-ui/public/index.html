<div class="card card-body">
  <form id="configForm">
    <div class="form-group">
      <label for="name">Name</label>
      <input type="text" class="form-control" id="name" placeholder="Homebridge Z-Wave USB" />
    </div>
    <div class="form-group">
      <label for="serialPort">Serial Port Path</label>
      <input type="text" class="form-control" id="serialPort" placeholder="/dev/ttyACM0" required />
      <small class="form-text text-muted">
        WARNING: Do not use /dev/ttyUSB0. Use /dev/serial/by-id/...
      </small>
    </div>

    <fieldset>
      <legend>Z-Wave Security Keys</legend>
      <p class="text-muted small">Required for secure devices (Locks, Sensors).</p>
      <button type="button" class="btn btn-outline-primary btn-sm mb-3" id="generateKeys">
        Auto-Generate Keys
      </button>

      <div class="form-group">
        <label for="S0_Legacy">S0 Legacy</label>
        <input type="text" class="form-control" id="S0_Legacy" maxlength="32" />
      </div>
      <div class="form-group">
        <label for="S2_Unauthenticated">S2 Unauthenticated</label>
        <input type="text" class="form-control" id="S2_Unauthenticated" maxlength="32" />
      </div>
      <div class="form-group">
        <label for="S2_Authenticated">S2 Authenticated</label>
        <input type="text" class="form-control" id="S2_Authenticated" maxlength="32" />
      </div>
      <div class="form-group">
        <label for="S2_AccessControl">S2 Access Control</label>
        <input type="text" class="form-control" id="S2_AccessControl" maxlength="32" />
      </div>

      <p class="text-muted small mt-3">
        Optional: Long Range specific keys (defaults to Classic S2 if empty)
      </p>
      <div class="form-group">
        <label for="S2_Authenticated_LR">S2 Authenticated (LR)</label>
        <input type="text" class="form-control" id="S2_Authenticated_LR" maxlength="32" />
      </div>
      <div class="form-group">
        <label for="S2_AccessControl_LR">S2 Access Control (LR)</label>
        <input type="text" class="form-control" id="S2_AccessControl_LR" maxlength="32" />
      </div>
    </fieldset>

    <fieldset>
      <legend>Advanced</legend>
      <div class="form-group">
        <label for="inclusionTimeoutSeconds">Inclusion Timeout (Seconds)</label>
        <input type="number" class="form-control" id="inclusionTimeoutSeconds" placeholder="60" />
      </div>

      <div class="form-check mt-3">
        <input type="checkbox" class="form-check-input" id="debug" />
        <label class="form-check-label" for="debug">Enable Verbose Driver Logging</label>
      </div>
    </fieldset>
  </form>

      // Save event listener as a backup
      window.homebridge.addEventListener('submitting', async () => {
        await updateConfig();
      });
    };

    // Try to initialize
    if (window.homebridge && window.homebridge.getPluginConfig) {
      init();
    } else if (window.homebridge) {
      window.homebridge.addEventListener('ready', init);
    } else {
      window.addEventListener('homebridgeReady', init);
    }
  })();
</script>
